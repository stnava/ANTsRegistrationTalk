<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Brian B. Avants (PENN) and Nicholas J. Tustison (UVA)" />
  <title>An Exegesis of Registration in Advanced Normalization Tools (ANTs)</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="index_files/reveal.js-2.6.1/css/reveal.min.css"/>

  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }

  </style>

    <style type="text/css">code{white-space: pre;}</style>



<link rel="stylesheet" href="index_files/reveal.js-2.6.1/css/theme/solarized.css" id="theme">


    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'index_files/reveal.js-2.6.1/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]>
    <script src="index_files/reveal.js-2.6.1/lib/js/html5shiv.js"></script>
    <![endif]-->

</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title"><span style="color:red;">An Exegesis of Registration in <br />Advanced Normalization Tools (<em>ANTs</em>)</span></h1>
    <h2 class="author">Brian B. Avants (<span style="color:blue;">PENN</span>) and <br />Nicholas J. Tustison (<span style="color:orange;">UVA</span>)</h2>
    <h3 class="date"></h3>
</section>

<section id="section" class="slide level2">
<h1></h1>
<div align="center">
<img src="figures/ireland.png" frameborder="0"></img>
</div>
<p>This talk is online at <a href="http://stnava.github.io/ANTsRegistrationTalk/"><a href="http://stnava.github.io/ANTsRegistrationTalk/" class="uri">http://stnava.github.io/ANTsRegistrationTalk/</a></a> with colored <a href="http://stnava.github.io/ANTsRegistrationTalk/">links</a> meant to be clicked for more information</p>
</section>
<section id="we-can-compare-apples-and-oranges" class="slide level2">
<h1>we <em>can</em> compare apples and oranges …</h1>
<p><img src="figures/appleorange1.png" /></p>
<p>initialization</p>
</section>
<section id="we-can-compare-apples-and-oranges-1" class="slide level2">
<h1>we <em>can</em> compare apples and oranges …</h1>
<p><img src="figures/appleorange2.png" /></p>
<p><span style="color:red;">R</span><span style="color:green;">G</span><span style="color:blue;">B</span> affine</p>
</section>
<section id="we-can-compare-apples-and-oranges-2" class="slide level2">
<h1>we <em>can</em> compare apples and oranges …</h1>
<p><img src="figures/appleorange3.png" /></p>
<p><span style="color:red;">R</span><span style="color:green;">G</span><span style="color:blue;">B</span> deformable registration - i.e. registration on color</p>
</section>
<section><section id="ants-optimizes-mathematically-well-defined-objective-functions-guided-by-prior-knowledge" class="titleslide slide level1"><h1><em>ANTs</em> optimizes mathematically <br /> well-defined <br /><span style="color:red;">objective functions</span> <br />guided by <br /> <span style="color:red;">prior knowledge</span> …</h1></section></section>
<section><section id="plug-your-ideas-into-our-software-innovation-insight-from-biomedical-data" class="titleslide slide level1"><h1>plug <em>your ideas</em> into our software: <br /> <span style="color:blue;"> <span style="color:red;">innovation, insight</span> from biomedical data</span> …</h1></section><section id="ants-lineage" class="slide level2">
<h1>ANTs Lineage</h1>
<p><img src="figures/lineage.jpg" /></p>
</section><section id="diffeomorphisms" class="slide level2">
<h1>Diffeomorphisms</h1>
<div align="center">
<img width="1433" src="./figures/sillyputty.png" frameborder="0"></img>
</div>
<p>plausible physical modeling of large, invertible deformations</p>
<p>“differentiable map with differentiable inverse”</p>
</section><section id="fine-grained-and-flexible-maps" class="slide level2">
<h1>Fine-grained and flexible maps</h1>
<p><img src="figures/highresdiffeos.jpg" /></p>
</section><section id="ants-beyond-registration" class="slide level2">
<h1>ANTs: Beyond Registration</h1>
<p><img src="figures/antscapabilities.jpg" /></p>
<p><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=atropos+tustison">Atropos</a> segmentation, <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=N4+tustison">N4 inhomogeneity correction</a>, <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=eigenanatomy+avants">Eigenanatomy</a>, <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=sparse+canonical+avants">SCCAN</a>, <a href="http://www.ncbi.nlm.nih.gov/pubmed/24852460">Prior-constrained PCA</a>, and <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC4009425/">atlas-based label fusion</a> and <a href="http://www.ncbi.nlm.nih.gov/pubmed/21237273">MALF</a> (powerful expert systems for segmentation)</p>
<p>but <em>this talk</em> focuses on the core registration functionality that is critical to the applications above</p>
</section><section id="founding-developers" class="slide level2">
<h1>Founding developers</h1>
<div align="center">
<img width="1433" src="./figures/bant2.png" frameborder="0"></img>
</div>
</section><section id="long-term-collaborators" class="slide level2">
<h1>Long-term collaborators</h1>
<p><img src="figures/antscollab.jpg" /></p>
<p><span class="math">\(+\)</span> <a href="http://neuro.debian.net/pkgs/ants.html">neurodebian</a>, <a href="http://www.slicer.org/">slicer</a>, <a href="https://github.com/BRAINSia/BRAINSTools">brainsfit</a>, <a href="http://nipy.sourceforge.net/nipype/">nipype</a>, <a href="http://www.itk.org">itk</a> and more …</p>
</section><section id="general-purpose-library-for-multivariate-image-registrationsegmentation-statistical-analysis-tools" class="slide level2">
<h1>General purpose library for multivariate image registration,segmentation &amp; statistical analysis tools</h1>
<ul>
<li class="fragment"><p>170,000+ lines of C++, 6<span class="math">\(+\)</span> years of work, 15+ collaborators.</p></li>
<li class="fragment"><p>Generic mathematical methods that are tunable for application specific domains: no-free lunch</p></li>
<li class="fragment"><p>Deep testing on multiple platforms …</p></li>
</ul>
<pre><code>    An algorithm must use prior knowledge about a problem 
    to do well on that problem </code></pre>
</section></section>
<section><section id="medical-image-registration-fundamental-tool-for-morphometry-segmentation-motion-estimation-and-data-cleaning" class="titleslide slide level1"><h1><span style="color:red;">Medical Image Registration</span> <br /> Fundamental tool for morphometry, segmentation, motion estimation and <br /> <span style="color:blue;">data cleaning</span></h1></section><section id="definitions" class="slide level2">
<h1>Definitions</h1>
<ul>
<li class="fragment"><p>Registration <span class="math">\(=\)</span> estimate an “optimal” geometric mapping between image pairs or image sets (e.g. Affine)</p></li>
<li class="fragment"><p>Similarity <span class="math">\(=\)</span> a function relating one image to another, given a transformation (e.g. mutual information)</p></li>
<li class="fragment"><p><span style="color:grey;"> Diffeomorphisms <span class="math">\(=\)</span> differentiable map with differentiable inverse (e.g. “silly putty”, viscous fluid) </span></p></li>
<li class="fragment"><p>Segmentation <span class="math">\(=\)</span> labeling tissue or anatomy in images, usually automated (e.g. K-means)</p></li>
<li class="fragment"><p><span style="color:grey;"> Multivariate <span class="math">\(=\)</span> using many voxels or measurements at once (e.g. PCA, <span class="math">\(p &gt;&gt; n\)</span> ridge regression)</span></p></li>
<li class="fragment"><p>Multiple modality <span class="math">\(=\)</span> using many modalities at once (e.g. DTI and T1 and BOLD)</p></li>
</ul>
</section><section id="the-technical-framework" class="slide level2">
<h1>The Technical Framework</h1>
<p><img src="figures/designprinciples.png" /></p>
</section><section id="ants-nomenclature-standards" class="slide level2">
<h1>ANTs Nomenclature / Standards</h1>
<p><img src="figures/antsnomen1.jpg" /></p>
</section><section id="ants-nomenclature-standards-1" class="slide level2">
<h1>ANTs Nomenclature / Standards</h1>
<p><img src="figures/antsnomen2.jpg" /></p>
</section><section id="ants-nomenclature-standards-2" class="slide level2">
<h1>ANTs Nomenclature / Standards</h1>
<p><img src="figures/antsnomen3.jpg" /></p>
</section><section id="ants-nomenclature-standards-3" class="slide level2">
<h1>ANTs Nomenclature / Standards</h1>
<p><img src="figures/antsnomen4.jpg" /></p>
</section><section id="the-a-team-of-similarity-metrics" class="slide level2">
<h1>The <em>A</em>-team of similarity metrics</h1>
<p><img src="figures/towardsstandardmetric.png" /></p>
<p><span class="math">\[ \| I - J \| ~~~~~~~~~~~~~~~~~~~ \frac{&lt; I, J &gt;}{\|I\|\|J\|} ~~~~~~~~~~~~~~~ p(I,J) log \frac{p(I,J)}{p(I)p(J)}\]</span></p>
<p><strong>all metrics</strong> may be computed from <strong>sparse</strong> or <strong>dense</strong> samples and used with low or high-dimensional transformations</p>
</section><section id="the-optimization-function" class="slide level2">
<h1>The optimization function</h1>
<p>Find mapping <span class="math">\[ \phi(x,p) \in \mathcal{T} \]</span> such that</p>
<p><span class="math">\[ M(I,J,\phi(x,p)) \]</span> is minimized</p>
<p>Must select both metric <span class="math">\(M\)</span> and transformation <span class="math">\(\mathcal{T}\)</span></p>
<p>… in addition to optimizer and the problem’s resolution</p>
</section><section id="concatenating-transformation-metric-stages-are-necessary-in-real-data" class="slide level2">
<h1>Concatenating transformation / metric stages are necessary in real data</h1>
</section></section>
<section><section id="registration-with-priors" class="titleslide slide level1"><h1>Registration with priors</h1></section><section id="prior-knowledge-about-how-to-map---e.g.lesion-brains" class="slide level2">
<h1>prior knowledge about how to map - e.g. lesion brains</h1>
<blockquote>
<p>a test &gt; is the best</p>
</blockquote>
</section><section id="we-need-to-deform-but-not-the-lesion" class="slide level2">
<h1>we need to deform ( but not the lesion )</h1>
</section><section id="with-landmarks-two-metrics" class="slide level2">
<h1>with landmarks … two metrics</h1>
</section><section id="important-in-segmentation-brain-extraction-segmentation-anatomical-labeling" class="slide level2">
<h1>important in segmentation: brain extraction, segmentation, anatomical labeling</h1>
<ul>
<li class="fragment"><p>general purpose</p></li>
<li class="fragment"><p>can use library of shapes to identify objects …</p></li>
</ul>
</section><section id="building-templates" class="slide level2">
<h1>building templates</h1>
</section></section>
<section><section id="ants-in-competition" class="titleslide slide level1"><h1>ANTs in competition</h1></section><section id="grand-challenges" class="slide level2">
<h1>“grand challenges”</h1>
</section><section id="ants-versus-freesurfer" class="slide level2">
<h1>ANTs versus Freesurfer</h1>
</section></section>
<section><section id="ants-statistics-antsr" class="titleslide slide level1"><h1>ANTs statistics: <em>ANTsR</em></h1></section><section id="antsr-code-example" class="slide level2">
<h1>ANTsR code example</h1>
</section><section id="ptbp" class="slide level2">
<h1>PTBP</h1>
</section><section id="brats-competition" class="slide level2">
<h1>BRATS competition</h1>
</section><section id="antsr-eanat" class="slide level2">
<h1>ANTsR: EANAT</h1>
</section><section id="antsr-sccan" class="slide level2">
<h1>ANTsR: SCCAN</h1>
</section></section>
<section><section id="registration-frontiers-and-innovation" class="titleslide slide level1"><h1>Registration: Frontiers and Innovation</h1></section><section id="coordinated-multivariate-statistical-fields-arise-from-this-mapping" class="slide level2">
<h1>coordinated multivariate statistical fields arise from this mapping</h1>
<p><img src="figures/statisticalfields.png" alt="images at measurement fields" /></p>
</section></section>
<section><section id="analysis-philosophy-and-published-opinions" class="titleslide slide level1"><h1>Analysis philosophy and published opinions</h1></section><section id="what-is-and-is-not-image-registration" class="slide level2">
<h1>What is and <em>is not</em> image registration</h1>
<p><a href="http://www.ncbi.nlm.nih.gov/pubmed/23116330"><em>not</em> registration</a></p>
</section><section id="voodoo-in-voxel-based-analysis" class="slide level2">
<h1>Voodoo in voxel-based analysis</h1>
<p><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=logical+circularity+tustison">logical circularity VBA</a></p>
</section><section id="instrumentation-bias-in-the-use-and-evaluation-of-software" class="slide level2">
<h1>Instrumentation bias in the use and evaluation of software</h1>
<p><a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3766821/?report=reader">Instrumentation bias in the use and evaluation of software</a></p>
</section></section>
<section><section id="conclusion" class="titleslide slide level1"><h1>Conclusion</h1></section><section id="recap" class="slide level2">
<h1>Recap</h1>
<ul>
<li class="fragment"><p>Powerful, general-purpose, <span style="color:red;">well-evaluated</span> registration and segmentation.</p></li>
<li class="fragment"><p>Differentiable maps with differentiable inverse <span style="color:red;"><span class="math">\(+\)</span> statistics in these spaces</span></p></li>
<li class="fragment"><p>Evaluated in multiple problem domains</span> via internal studies &amp; open competition</p></li>
<li class="fragment"><p>Borg philosophy: <span style="color:red;">“best of”</span> from I/O, to processing to statistical methods</p></li>
<li class="fragment"><p>Open source, testing, many examples, consistent style, multiple platforms, active community support …</p></li>
<li class="fragment"><p>Integration with <em>R</em> <span class="math">\(+\)</span> novel tools for prediction, decoding, high-to-low dimensional statistics.</p></li>
<li class="fragment"><p>Collaborations with <a href="http://neuro.debian.net/pkgs/ants.html">neurodebian</a>, <a href="http://www.slicer.org/">slicer</a>, <a href="https://github.com/BRAINSia/BRAINSTools">brainsfit</a>, <a href="http://nipy.sourceforge.net/nipype/">nipype</a>, <a href="http://www.itk.org">itk</a> and more …</p></li>
</ul>
</section><section id="challenges-computational-and-scientific" class="slide level2">
<h1>Challenges: Computational and Scientific</h1>
<ul>
<li class="fragment">Scalability: <strong>need to fuse feature selection methods with transformation optimization</strong></li>
<li class="fragment">Scalability: <strong>need to leverage existing ITK streaming infrastructure in application level tool</strong></li>
<li class="fragment">Domain expertise: Customizable for specific problems but sometimes not specific enough</li>
<li class="fragment">Rapid development: colleagues still need familiarity with compilation for latest ANTs features</li>
<li class="fragment">Latest theoretical advances in registration not yet wrapped for users</li>
<li class="fragment">Need more <a href="http://stnava.github.io/ANTs/">Documentation</a> &amp; <a href="http://testing.psychiatry.uiowa.edu/CDash/index.php?project=ANTS">testing</a> …</li>
</ul>
</section><section id="tools-you-can-use-for-imaging-science" class="slide level2">
<h1>Tools you can use for imaging science</h1>
<ul>
<li class="fragment"><p>Core developers: <em>B. Avants, N. Tustison, H. J. Johnson, J. T. Duda</em></p></li>
<li class="fragment"><p>Many contributors, including users …</p></li>
<li class="fragment"><p>Multi-platform, multi-threaded C++ <a href="stnava.github.io/ANTs" class="uri">stnava.github.io/ANTs</a></p></li>
<li class="fragment"><p>Developed in conjunction with <a href="http://www.itk.org/"><a href="http://www.itk.org/" class="uri">http://www.itk.org/</a></a></p></li>
<li class="fragment"><p>R wrapping and extension <a href="stnava.github.io/ANTsR" class="uri">stnava.github.io/ANTsR</a></p></li>
<li class="fragment"><p>rapid development, regular testing <span class="math">\(+\)</span> many eyes <span class="math">\(\rightarrow\)</span> bugs are shallow</p></li>
</ul>
<p><img style="float: right" src="figures/penn.png" /> <img style="float: left" src="figures/picsl.jpg" /></p>
</section><section id="reffont" class="slide level2 unnumbered">
<h1>References</h1>
<div class="references">

</div>
</section></section>
    </div>
  </div>

  <script src="index_files/reveal.js-2.6.1/lib/js/head.min.js"></script>
  <script src="index_files/reveal.js-2.6.1/js/reveal.min.js"></script>

  <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'fade',

        // Optional libraries used to extend on reveal.js
        dependencies: []});
    </script>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

  </body>
</html>
